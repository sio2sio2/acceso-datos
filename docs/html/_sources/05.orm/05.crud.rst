.. _orm-crud:

Operaciones |CRUD|
******************
Ya hemos discutido cómo :ref:`conectar y abrir sesiones de un modo eficiente
<orm-conn>` e incluso :ref:`hemos ilustrado cómo hacer uso de nuestra
estrategia <orm-uso-sf>`. Toca ahora profundizar en cómo realizar operaciones de
persistencia con la base de datos.

.. note:: Hemos preferido acatar la terminología emanada del acrónimo |CRUD|,
   por lo que incluimos cada uno de los términos en los epígrafes. Tenga
   presente, pues, que *CREATE* hace referencia a \"crear\" datos en la base de
   datos, esto es, añadir o insertar datos; y no con crear el esquema (```CREATE
   TABLE``, etc). De hecho, no hemos de preocuparnos por el esquema, ya que éste
   es capaz de generarse sólo a partir de las clases anotadas.

CREATE: Operaciones de inserción
================================
Para agregar objetos (o sea, registros) a la base de datos, Hibernate_ utiliza
el método ``.persist``:

.. code-block:: java
   :emphasize-lines: 14

   // Supongamos que el objeto ya se instanció antes y se creó.
   HibernateFactory hf = HibernateFactory.getInstance();
   Transaction tr = null;

   try(Session sesion = hf.openSession()) {
      try {
         tr = sesion.beginTransaction();
         // Supongamos que nuestra base de datos no tiene direcciones de centro
         Centro castillo = new Centro(
            11004866,
            "IES Castillo de Luna",
            Centro.Titularidad.PUBLICA
         );
         sesion.persist(castillo);
         tr.commit();
      }
      catch(Exception err) {
         if(tr != null) tr.rollback;
      }
   }

READ: Operaciones de lectura
============================
Para 

.. |CRUD| replace:: :abbr:`CRUD (Create, Read, Update, Delete)`
.. _Hibernate: https://www.hibernate.org
