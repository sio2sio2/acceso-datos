


<!DOCTYPE html>


<html lang="es" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. Análisis de la línea de órdenes &#8212; documentación de Acceso a datos - rolling</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" href="../_static/general.css" type="text/css" />
    <link rel="stylesheet" href="../_static/particular.css" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=461dccb6"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=677778c1"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/translations.js?v=f85f4cfb"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '98.apendices/15.cli';</script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="5. Maven" href="80.maven.html" />
    <link rel="prev" title="3. Sistema de registros" href="10.logging.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="es"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Saltar al contenido principal</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Volver arriba</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Advertencia de versión"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.jpg" class="logo__image only-light" alt="documentación de Acceso a datos - rolling - Home"/>
    <script>document.write(`<img src="../_static/logo.jpg" class="logo__image only-dark" alt="documentación de Acceso a datos - rolling - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Búsqueda</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../01.archivos/index.html">1. Tratamiento de archivos</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../01.archivos/01.gestion.html">1.1. Gestión de archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01.archivos/02.manipulacion.html">1.2. Consulta y manipulación de contenidos</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02.formatos/index.html">2. Formatos de información</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../02.formatos/01.csv.html">2.1. <abbr title="Comma-Separated Values">CSV</abbr></a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../02.formatos/02.json.html">2.2. <abbr title="JavaScript Object Notation">JSON</abbr></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../02.formatos/02.json/01.gson.html">2.2.1. GSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02.formatos/02.json/02.jackson.html">2.2.2. Jackson</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../02.formatos/03.yaml.html">2.3. <abbr title="YAML Ain't Markup Language">YAML</abbr></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../03.xml/index.html">3. <abbr title="eXtensible Markup Language">XML</abbr></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../03.xml/01.jaxp.html">3.1. <abbr title="Java API for XML Processing">JAXP</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../03.xml/02.jackson.html">3.2. Jackson</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03.xml/03.basex.html">3.3. BaseX</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../04.conector/index.html">4. Conectores</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../04.conector/01.basico.html">4.1. Operaciones básicas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.conector/02.datos.html">4.2. Datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.conector/03.transacciones.html">4.3. Transacciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.conector/04.pool.html">4.4. <em>Pool</em> de conexiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.conector/10.extras.html">4.5. Extras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.conector/15.dao.html">4.6. Programación con conectores</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../05.orm/index.html">5. Herramientas <abbr title="Object-Relational Mapping">ORM</abbr></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../05.orm/01.conf.html">5.1. Configuración</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.orm/02.basico.html">5.2. Operativa básica</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.orm/04.mapeo.html">5.3. Mapeo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.orm/08.transaction.html">5.4. Transacciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.orm/09.dao.html">5.5. Estrategias de diseño</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../05.orm/10.crud.html">5.6. Operaciones <abbr title="Create, Read, Update, Delete">CRUD</abbr></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../05.orm/10.crud/01.simples.html">5.6.1. Simples</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../05.orm/10.crud/02.avanzadas.html">5.6.2. Avanzadas</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../05.orm/10.crud/02.avanzadas/01.hql.html">5.6.2.1. <abbr title="Java Persistence Query Language">JPQL</abbr></a></li>
<li class="toctree-l4"><a class="reference internal" href="../05.orm/10.crud/02.avanzadas/02.criteria.html">5.6.2.2. Criteria API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05.orm/10.crud/02.avanzadas/03.nativo.html">5.6.2.3. <abbr title="Structured Query Language">SQL</abbr> nativo</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../05.orm/15.extra.html">5.7. Otros aspectos</a></li>
</ul>
</details></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../99.ejercicios/index.html">Ejercicios</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../99.ejercicios/01.archivos.html">1. Archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99.ejercicios/02.formatos.html">2. Formatos de información</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99.ejercicios/03.xml.html">3. Formato <abbr title="eXtensible Markup Language">XML</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../99.ejercicios/04.conectores.html">4. <abbr title="Java DataBase Connectivity">JDBC</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../99.ejercicios/05.orm.html">5. <abbr title="Java Persistent API">JPA</abbr></a></li>
</ul>
</details></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Apéndices</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="01.funcional.html">1. Java funcional</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="01.funcional/01.function.html">1.1. Interfaces funcionales</a></li>
<li class="toctree-l3"><a class="reference internal" href="01.funcional/05.collection.html">1.2. Colecciones</a></li>
<li class="toctree-l3"><a class="reference internal" href="01.funcional/10.flujos.html">1.3. Flujos</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="05.pattern.html">2. Patrones de diseño</a></li>
<li class="toctree-l2"><a class="reference internal" href="10.logging.html">3. Sistema de registros</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">4. Análisis de la línea de órdenes</a></li>
<li class="toctree-l2"><a class="reference internal" href="80.maven.html">5. Maven</a></li>
<li class="toctree-l2"><a class="reference internal" href="99.ide.html">6. Visual Studio Code</a></li>
</ul>
</details></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../97.orientaciones/index.html">Orientaciones pedagógicas</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Descarga esta pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/98.apendices/15.cli.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Descargar archivo fuente"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimir en PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Modo de pantalla completa"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="claro/oscuro" aria-label="claro/oscuro" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Análisis de la línea de órdenes</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenido </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#principios">4.1. Principios</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objeto-config">4.2. Objeto <code class="docutils literal notranslate"><span class="pre">config</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#picocli">4.3. Picocli</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#basico">4.3.1. Básico</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conversores">4.3.2. Conversores</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#informacion-de-ayuda">4.3.3. Información de ayuda</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="analisis-de-la-linea-de-ordenes">
<span id="cliargs"></span><h1><span class="section-number">4. </span>Análisis de la línea de órdenes<a class="headerlink" href="#analisis-de-la-linea-de-ordenes" title="Link to this heading">#</a></h1>
<p>Cualquier aplicación necesita para ejecutarse que se le suministren unos datos
de entrada. Para el suministro pueden usarse varias vías:</p>
<ol class="arabic">
<li><p>Incluirlos dentro del código de la propia aplicación. Este mecanismo se
utiliza para proporcionar los datos predeterminados y es absolutamente
inconveniente para cualquier otro tipo de dato.</p></li>
<li><p>Añadir argumentos en la línea de órdenes que, aunque resulte algo paradójico,
es un mecanismo que suele utilizarse aunque la aplicación sea de interfaz
gráfica.</p></li>
<li><p>Utilizar archivos de configuración en distintos formatos (<abbr title="JavaScript Object Notation">JSON</abbr>, <abbr title="YAML Ain't Markup Language">YAML</abbr>,
<abbr title="eXtensible Markup Language">XML</abbr>, INI, etc.). Para configuraciones simples pueden utilizarse archivos de
definición de propiedades:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">app.version</span><span class="o">=</span><span class="s">1.1</span>
<span class="na">app.ui</span><span class="o">=</span><span class="s">cli</span>
<span class="c1"># etc...</span>
</pre></div>
</div>
<p>que tienen soporte nativo en Java utilizando <a class="extlink-java-util reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/Properties.html">Properties</a>.</p>
</li>
<li><p>Proporcionarlos de forma interactiva el usuario a través de la interfaz que
utilice el programa (<abbr title="Command Line Interface">CLI</abbr>, <abbr title="Graphical User Interface">GUI</abbr>)</p></li>
</ol>
<p>En este apéndice nos centraremos en cómo obtener información de la línea de
órdenes y, ligeramente, cómo complementarlo con archivos de definición de
propiedades. En cualquier caso, utilizar otros formatos es trivial si se cabe
cómo leer estos, que es algo que se aprende en las primeras unidades del curso.</p>
<p>La obtención de datos a través de interfaces interactivas de usuario es estudio
propio del módulo de «Desarrollo de Interfaces».</p>
<section id="principios">
<h2><span class="section-number">4.1. </span>Principios<a class="headerlink" href="#principios" title="Link to this heading">#</a></h2>
<p><em>Java</em>, como cualquier otro lenguaje de programación, almacena los argumentos
pasados al programa en un array de cadenas (<code class="docutils literal notranslate"><span class="pre">String[]</span></code>), de ahí que el método
estático que arranca la aplicación sea:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Código ...</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Prudencia</p>
<p>En <em>Java</em>, los elementos de este array incluyen (en orden)
exclusivamente los argumentos del programa, por lo que el primer elemento (el
elemento 0) también es argumento y no el nombre con el que se invocó el
programa, como ocurre en otros lenguajes com o <em>Python</em>.</p>
</div>
<p>Sin embargo, basar la introducción de parámetros de entrada en la posición y
obtenerlos de este array es un engorro para el usuario que ejecuta la
aplicación, por lo que lo más juicioso es habilitar que la línea de órdenes
cumpla con el <cite>estándar POSIX &lt;:linux:ordenar&gt;</cite>. Para ello, hay distintas
librerías: nosotros estudiaremos <a class="reference external" href="https://picocli.info/">picocli</a>.</p>
<p>Otro aspecto a tener en cuenta es la necesidad de acceso a esos datos desde
cualquier lugar de la aplicación, porque sus valores pueden condicionar
cualquier aspecto de la ejecución. Obsérvese, sin embargo, que los argumentos
(<code class="docutils literal notranslate"><span class="pre">args</span></code>) están disponibles en el método de entrada y que fácilmente podríamos
hacerlos accesible a todo el código de la clase en la que se encuentra el
método, o incluso de toda la aplicación:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span>

<span class="w">   </span><span class="c1">// Suponiendo que no usemos ninguna librería seguirá siendo String[]</span>
<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">;</span>

<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">Main</span><span class="p">.</span><span class="na">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">;</span>

<span class="w">       </span><span class="c1">// Código.</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pero esto es ser un poco chapucero. Lo analizaremos mejor. En definitiva,
nuestros principios son:</p>
<ul>
<li><p>Hacer accesible los datos en todo el código de la aplicación.</p></li>
<li><p>Utilizar el estándar POSIX para la introducción de argumentos y opciones. Por
ejemplo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>java<span class="w"> </span>-jar<span class="w"> </span>app.jar<span class="w"> </span>-vvvvv<span class="w"> </span>--ui<span class="o">=</span>cli<span class="w"> </span>-s<span class="w"> </span>-r<span class="w"> </span>--prefix<span class="o">=</span>pre<span class="w"> </span>archivo.txt
</pre></div>
</div>
<p>donde hay:</p>
<ul class="simple">
<li><p>Una opción (<code class="docutils literal notranslate"><span class="pre">-r</span></code>) sin parámetro que puede o no aparecer. Pongamos que su
versión larga es <code class="docutils literal notranslate"><span class="pre">--recursive</span></code>.</p></li>
<li><p>Una opción (<code class="docutils literal notranslate"><span class="pre">-s</span></code>) sin parámetro también. Pongamos que su
versión larga es <code class="docutils literal notranslate"><span class="pre">--silent</span></code>. Está relacionada con <code class="docutils literal notranslate"><span class="pre">-v</span></code> ya que ambas son
excluyentes.</p></li>
<li><p>Una opción (<code class="docutils literal notranslate"><span class="pre">--pre</span></code>) que permite un argumento de tipo cadena. Tiene la
versión corta <code class="docutils literal notranslate"><span class="pre">-p</span></code>.</p></li>
<li><p>Una opción (<code class="docutils literal notranslate"><span class="pre">--ui</span></code>) que permite también un argumento, pero en este caso es
un argumento con valores restringidos. Ya veremos cómo tratarlo.</p></li>
<li><p>Una opción (<code class="docutils literal notranslate"><span class="pre">-v</span></code>) sin parámetro, pero que admite su repetición y nos
interesa saber cuántas veces se ha repetido. Es el típico parámetro para
aumentar la verbosidad de la aplicación. Admite la opción larga <code class="docutils literal notranslate"><span class="pre">--verbose</span></code>.</p></li>
<li><p>Un argumento posicional.</p></li>
</ul>
<p>Además, existen las opciones típicas <code class="docutils literal notranslate"><span class="pre">-h</span></code>/<code class="docutils literal notranslate"><span class="pre">--help</span></code> para pedir ayuda y
<code class="docutils literal notranslate"><span class="pre">-V/--version</span></code> para mostrar la versión deel programa.</p>
</li>
</ul>
</section>
<section id="objeto-config">
<h2><span class="section-number">4.2. </span>Objeto <code class="docutils literal notranslate"><span class="pre">config</span></code><a class="headerlink" href="#objeto-config" title="Link to this heading">#</a></h2>
<p>El objetivo es tener un objeto <code class="docutils literal notranslate"><span class="pre">config</span></code> cuyos atributos sean los valores de
entrada y que sea accesible en todo el código. Para ello, lo más limpio es
utilizar el <a class="reference internal" href="05.pattern.html#singleton-pattern"><span class="std std-ref">patrón Singleton</span></a>. Por tanto, la clase
debería tener un aspecto así:</p>
<div class="literal-block-wrapper docutils container" id="config-pre">
<div class="code-block-caption"><span class="caption-text">Config.java (propuesta previa)</span><a class="headerlink" href="#config-pre" title="Link to this code">#</a></div>
<div class="toggle highlight-java notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Clase con un única instancia que almacena los parámetros de configuración.</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Config</span><span class="w"> </span><span class="p">{</span>

<span class="w">   </span><span class="c1">// Instancia única</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>

<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">DEFAULT_PATH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;user.home&quot;</span><span class="p">));</span>

<span class="w">   </span><span class="c1">// Datos</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">silent</span><span class="p">;</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="o">[]</span><span class="w"> </span><span class="n">verbosity</span><span class="p">;</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">recursive</span><span class="p">;</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="p">;</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Ui</span><span class="w"> </span><span class="n">ui</span><span class="p">;</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>

<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="nf">Config</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kd">super</span><span class="p">();</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cm">/**</span>
<span class="cm">    * Crea la instancia única a partir de los argumentos de la línea de órdenes.</span>
<span class="cm">    * @return El objeto de configuración recientemente creado.</span>
<span class="cm">    */</span>
<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Ya se creó un objeto de configuración&quot;</span><span class="p">);</span>

<span class="w">       </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span><span class="p">();</span>

<span class="w">       </span><span class="c1">// Código para poblar el objeto...</span>

<span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cm">/**</span>
<span class="cm">    * Permite recuperar desde cualquier lugar del código la configuración.</span>
<span class="cm">    * @return El objeto de configuración</span>
<span class="cm">    */</span>
<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;No se ha creado aún un objeto de configuración&quot;</span><span class="p">);</span>
<span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="c1">// ... Getters ...</span>
<span class="w">   </span><span class="c1">// pero no silent y verbositym porque añadimos este:</span>

<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="nf">getLogLevel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">silent</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">ERROR</span><span class="p">;</span>

<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">verbose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">verbosity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">verbosity</span><span class="p">.</span><span class="na">length</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">WARN</span><span class="p">;</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">INFO</span><span class="p">;</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">DEBUG</span><span class="p">;</span>
<span class="w">         </span><span class="k">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">TRACE</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Esta, pues, debería ser la clase con la que construyéramos el objeto. Su
implementación final dependerá de qué cuál sea la librería que utilicemos para
analizar la línea de órdenes.</p>
</section>
<section id="picocli">
<h2><span class="section-number">4.3. </span>Picocli<a class="headerlink" href="#picocli" title="Link to this heading">#</a></h2>
<p>Para tratar los argumentos de la línea de órdenes o, lo que es lo mismo, para
poblar nuestro objeto <code class="docutils literal notranslate"><span class="pre">Config</span></code> con los proporcionados al ejecutar el programa
usaremos la librería <a class="reference external" href="https://picocli.info/">picocli</a> (con también <a class="reference external" href="https://mvnrepository.com/artifact/info.picocli/picocli">repositorio en mvnrepository.com</a>).</p>
<section id="basico">
<h3><span class="section-number">4.3.1. </span>Básico<a class="headerlink" href="#basico" title="Link to this heading">#</a></h3>
<p>Para ello tomaremos como base la <a class="reference internal" href="#config-pre"><span class="std std-ref">clase Config propuesta</span></a> y
añadiremos las anotaciones precisas para que <a class="reference external" href="https://picocli.info/">picocli</a> haga su magia. Por ahora
no haremos la implementación completa y dejaremos aún cosas en el aire.</p>
<div class="literal-block-wrapper docutils container" id="config-picocli">
<div class="code-block-caption"><span class="caption-text">Config.java (con picocli)</span><a class="headerlink" href="#config-picocli" title="Link to this code">#</a></div>
<div class="toggle highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Command</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;java -jar miapp.jar&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mixinStandardHelpOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">         </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Mi aplicación molona&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Config</span><span class="w"> </span><span class="p">{</span>

<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>

<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">DEFAULT_PATH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;user.home&quot;</span><span class="p">));</span>

<span class="w">   </span><span class="nd">@Option</span><span class="p">(</span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;-s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--silent&quot;</span><span class="p">},</span>
<span class="w">           </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Modo silencioso, sólo muestra errores. Incompatible con -v&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">silent</span><span class="p">;</span>

<span class="w">   </span><span class="nd">@Option</span><span class="p">(</span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;-v&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--verbose&quot;</span><span class="p">},</span>
<span class="w">           </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Verbosidad de los mensajes de información. Puede repetirse para aumentarla&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="o">[]</span><span class="w"> </span><span class="n">verbosity</span><span class="p">;</span>

<span class="w">   </span><span class="nd">@Option</span><span class="p">(</span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;-r&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--recursive&quot;</span><span class="p">},</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Habilita la recursividad en la búsqueda&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">recursive</span><span class="p">;</span>

<span class="w">   </span><span class="nd">@Option</span><span class="p">(</span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;-p&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--prefix&quot;</span><span class="p">},</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Prefijo para búsqueda&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="p">;</span>

<span class="w">   </span><span class="nd">@Option</span><span class="p">(</span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;-i&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--ui&quot;</span><span class="p">},</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Interfaz de usuario&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">converter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uiconverter</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Ui</span><span class="w"> </span><span class="n">ui</span><span class="p">;</span>

<span class="w">   </span><span class="nd">@Parameters</span><span class="p">(</span><span class="n">paramLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;DIRECTORIO&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">arity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0..1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Directorio de búsqueda&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>

<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="nf">Config</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kd">super</span><span class="p">();</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cm">/**</span>
<span class="cm">    * Crea la instancia única a partir de los argumentos de la línea de órdenes.</span>
<span class="cm">    * @return El objeto de configuración recientemente creado.</span>
<span class="cm">    */</span>
<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Ya se creó un objeto de configuración&quot;</span><span class="p">);</span>

<span class="w">      </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span><span class="p">();</span>
<span class="w">      </span><span class="n">CommandLine</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CommandLine</span><span class="p">(</span><span class="n">instance</span><span class="p">);</span>

<span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">cmd</span><span class="p">.</span><span class="na">parseArgs</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd</span><span class="p">.</span><span class="na">isUsageHelpRequested</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">             </span><span class="n">cmd</span><span class="p">.</span><span class="na">usage</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">);</span>
<span class="w">             </span><span class="n">System</span><span class="p">.</span><span class="na">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">         </span><span class="p">}</span>

<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd</span><span class="p">.</span><span class="na">isVersionHelpRequested</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">             </span><span class="n">cmd</span><span class="p">.</span><span class="na">printVersionHelp</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">);</span>
<span class="w">             </span><span class="n">System</span><span class="p">.</span><span class="na">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">         </span><span class="p">}</span>

<span class="w">         </span><span class="c1">// Validaciones y reasignaciones de valor adicionales</span>
<span class="w">         </span><span class="n">instance</span><span class="p">.</span><span class="na">validate</span><span class="p">();</span>

<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">CommandLine</span><span class="p">.</span><span class="na">ParameterException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">logger</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;Error en parámetros: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">         </span><span class="n">cmd</span><span class="p">.</span><span class="na">usage</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">);</span>
<span class="w">         </span><span class="n">System</span><span class="p">.</span><span class="na">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cm">/**</span>
<span class="cm">    * Permite recuperar desde cualquier lugar del código la configuración.</span>
<span class="cm">    * @return El objeto de configuración</span>
<span class="cm">    */</span>
<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;No se ha creado aún un objeto de configuración&quot;</span><span class="p">);</span>
<span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cm">/**</span>
<span class="cm">    * Comprueba los valores suministrados.</span>
<span class="cm">    */</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="nf">validate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">silent</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">verbosity</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">verbosity</span><span class="p">.</span><span class="na">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CommandLine</span><span class="p">.</span><span class="na">ParameterException</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CommandLine</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Las opciones -s y -v son incompatibles&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="c1">// Más comprobaciones si fueran necesarias...</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="c1">// ... Getters ...</span>
<span class="w">   </span><span class="c1">// pero no silent y verbosity, porque añadimos este:</span>

<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="n">Level</span><span class="w"> </span><span class="nf">getLogLevel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">silent</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">ERROR</span><span class="p">;</span>

<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">verbose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">verbosity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">verbosity</span><span class="p">.</span><span class="na">length</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">WARN</span><span class="p">;</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">INFO</span><span class="p">;</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">DEBUG</span><span class="p">;</span>
<span class="w">         </span><span class="k">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">TRACE</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Analicemos las adiciones que hemos hecho al código:</p>
<ul>
<li><p>La anotación <code class="docutils literal notranslate"><span class="pre">&#64;Command</span></code> informa de que trataremos la clase con <a class="reference external" href="https://picocli.info/">picocli</a> y
proporciona información que se usa cuando se requiere ayuda o la versión.
Además, <code class="docutils literal notranslate"><span class="pre">mixinStandardHelpOptions</span></code> añade de forma automática las opciones
<code class="docutils literal notranslate"><span class="pre">-h</span></code>/<code class="docutils literal notranslate"><span class="pre">--help</span></code> y <code class="docutils literal notranslate"><span class="pre">-V</span></code>/<code class="docutils literal notranslate"><span class="pre">--version</span></code> sin que necesitemos expresamente
definirlas.</p>
<p>Podría ser que la información quisiéramos obtenerla de algún lado (por
ejemplo, el archivo <code class="docutils literal notranslate"><span class="pre">pom.xml</span></code> en un proyecto <a class="reference internal" href="80.maven.html#maven"><span class="std std-ref">Maven</span></a>). En ese caso, no
podemos añadir atributos a la anotación, ya que estos tienen que ser
constantes no calculadas y debería obrar de otro modo que <a class="reference internal" href="#picocli-command-plus"><span class="std std-ref">trataremos más
adelante</span></a>.</p>
</li>
<li><p>Los cuatro primeros atributos no tienen demasiada historia: se marcan con la
anotación <code class="docutils literal notranslate"><span class="pre">&#64;Option</span></code> y se indica qué nombres de opción se usarán y cuál es su
descripción (para la ayuda). Las opciones que son booleanas no requieren
argumento, mientras que las que no lo son sí lo necesitan y se deberá hacer
una transformación al tipo del atributo. En el ejemplo, <code class="docutils literal notranslate"><span class="pre">prefix</span></code> es una
cadena, así que en realidad, ni siquiera hay una transformación. Si alguna
hubiera sido de tipo <code class="docutils literal notranslate"><span class="pre">int</span></code> sí habría intentado hacerse automáticamente una
conversión y, en caso de fallo, se generaría un error.</p></li>
<li><p>El quinto atributo, <code class="docutils literal notranslate"><span class="pre">ui</span></code> tiene la particularidad de que almacena qué
interfaz se usará por lo que tiene un tipo particular: la interfaz <code class="docutils literal notranslate"><span class="pre">Ui</span></code> que
deberemos haber definido en nuestro programa. Obviamente, <a class="reference external" href="https://picocli.info/">picocli</a> es incapaz
de saber cómo obtener la interfaz apropiada a partir de la cadena que se ha
suministrado como atributo a la opción correspondiente. Por ese motivo, es
necesario <strong>crear un conversor</strong>. En nuestro código, falta aún implementar ese
conversor,</p></li>
<li><p>Por último, queda indicar los argumentos posicionales, lo cual se hace través
de la anotación <code class="docutils literal notranslate"><span class="pre">&#64;Parameters</span></code>.  Como queremos que se pueda (o no) incluir
una ruta, hemos decidido hacer el argumento de tipo <a class="extlink-java-util reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/Optional.html">Optional</a>, aunque podríamos haber respetado nuestro diseño original y
haberlo definido como <a class="extlink-java-nio reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/nio/file/Path.html">Path</a> a secas. Tal y como lo hemos
hecho, lo lógico es que el <em>getter</em> fuera así:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="nf">getInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="n">Config</span><span class="p">.</span><span class="na">DEFAULT_PATH</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Los argumentos posicionales también pueden ser varios en cuyo caso, podríamos
haber definido el tipo como <code class="docutils literal notranslate"><span class="pre">Path[]</span></code> o <code class="docutils literal notranslate"><span class="pre">List&lt;Path&gt;</span></code>, o incluso si hubiera
dos argumentos posicionales, uno el origen y otro el destino, podríamos haber
separado en dos:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Parameters</span><span class="p">(</span><span class="n">paramLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ORIGEN&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Archivo de origen&quot;</span><span class="p">)</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">origin</span><span class="p">;</span>

<span class="nd">@Parameters</span><span class="p">(</span><span class="n">paramLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;DESTINO&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Archivo de destino&quot;</span><span class="p">)</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>En el método estático <code class="docutils literal notranslate"><span class="pre">.create</span></code> está definido cómo usar <a class="reference external" href="https://picocli.info/">picocli</a> para
procesar los argumentos:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span><span class="p">();</span>
<span class="n">CommandLine</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CommandLine</span><span class="p">(</span><span class="n">instance</span><span class="p">);</span>

<span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">cmd</span><span class="p">.</span><span class="na">parseArgs</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="w">   </span><span class="c1">// Código adicional</span>

<span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">CommandLine</span><span class="p">.</span><span class="na">ParameterException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">&quot;Error en parámetros: {}.\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">    </span><span class="n">cmd</span><span class="p">.</span><span class="na">usage</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">);</span><span class="w">  </span><span class="c1">// Muestra la ayuda.</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>En el código adicional podemos:</p>
<ul class="simple">
<li><p>Mostrar la ayuda en caso de que se usara la opción correspondiente.</p></li>
<li><p>Mostrar la versión en caso de que se usara la opción correspondiente.</p></li>
<li><p>Hacer validaciones adicionales, que nosotros hemos incluido en el método
<code class="docutils literal notranslate"><span class="pre">.validate</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="conversores">
<span id="picocli-converter"></span><h3><span class="section-number">4.3.2. </span>Conversores<a class="headerlink" href="#conversores" title="Link to this heading">#</a></h3>
<p>Los conversores, simplemente, indican cómo obtener el tipo deseado a partir del
valor que se introdujo en la línea de órdenes:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// La clase la incluímos dentro de Config</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UiConverter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CommandLine</span><span class="p">.</span><span class="na">ITypeConverter</span><span class="o">&lt;</span><span class="n">Ui</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nd">@Override</span>
<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="n">Ui</span><span class="w"> </span><span class="nf">convert</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Supongamos que hemos implementado el patrón Factory</span>
<span class="w">      </span><span class="c1">// para escoger qué interfaz se usa.</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">UiFactory</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="informacion-de-ayuda">
<span id="picocli-command-plus"></span><h3><span class="section-number">4.3.3. </span>Información de ayuda<a class="headerlink" href="#informacion-de-ayuda" title="Link to this heading">#</a></h3>
<p>Ya hemos visto que tanto la información que se muestra en la ayuda como la que
se muestra con la versión se introducen como atributos de la anotación
<code class="docutils literal notranslate"><span class="pre">&#64;Command</span></code>. El problema es que en muchos casos está información ya se
encuentra referida en otra parte del proyecto (en caso de <a class="reference internal" href="80.maven.html#maven"><span class="std std-ref">Maven</span></a> en el
<code class="file docutils literal notranslate"><span class="pre">pom.xml</span></code>) y copiarla aquí supone duplicarla y preocuparse mantenerla
sincronizada.</p>
<p>Por ese motivo, existe una alternativa que consiste en:</p>
<ol class="loweralpha">
<li><p>Crear un archivo dentro de <code class="file docutils literal notranslate"><span class="pre">src/main/resources</span></code> que copie los valores
que hemos definido en el <code class="file docutils literal notranslate"><span class="pre">pom.xml</span></code>. Por ejemplo:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/main/resources/app.properties</span>
<span class="na">app.name</span><span class="o">=</span><span class="s">${project.name}</span>
<span class="na">app.version</span><span class="o">=</span><span class="s">${project.version}</span>
<span class="na">app.description</span><span class="o">=</span><span class="s">${project.description}</span>
</pre></div>
</div>
</li>
<li id="add-resources"><p>Añadir en <code class="file docutils literal notranslate"><span class="pre">pom.xml</span></code> un sección que añada el archivo al proyecto y
habilite la sustitución de las variables incluidas en el archivo anterior
por sus valores:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;build&gt;</span>
<span class="w">   </span><span class="nt">&lt;plugins&gt;</span>
<span class="w">      </span><span class="cm">&lt;!-- Los plugins que se usen --&gt;</span>
<span class="w">   </span><span class="nt">&lt;/plugins&gt;</span>

<span class="w">   </span><span class="nt">&lt;resources&gt;</span>
<span class="w">      </span><span class="nt">&lt;resource&gt;</span>
<span class="w">         </span><span class="nt">&lt;directory&gt;</span>src/main/resources<span class="nt">&lt;/directory&gt;</span>
<span class="w">         </span><span class="nt">&lt;includes&gt;</span>
<span class="w">            </span><span class="nt">&lt;include&gt;</span>**/*.properties<span class="nt">&lt;/include&gt;</span>
<span class="w">         </span><span class="nt">&lt;/includes&gt;</span>
<span class="w">         </span><span class="nt">&lt;filtering&gt;</span>true<span class="nt">&lt;/filtering&gt;</span>
<span class="w">      </span><span class="nt">&lt;/resource&gt;</span>
<span class="w">   </span><span class="nt">&lt;/resources&gt;</span>
</pre></div>
</div>
</li>
<li><p>Definir un método privado en <a class="reference internal" href="#config-picocli"><span class="std std-ref">Config</span></a> que cargue en el
código de Java las propiedades almacenadas en el archivo:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Properties</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resources</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">Properties</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span>

<span class="w">   </span><span class="k">try</span><span class="p">(</span>
<span class="w">       </span><span class="n">InputStream</span><span class="w"> </span><span class="n">st</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getClass</span><span class="p">().</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="n">resource</span><span class="p">);</span>
<span class="w">       </span><span class="n">InputStreamReader</span><span class="w"> </span><span class="n">sr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InputStreamReader</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="w"> </span><span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">);</span>
<span class="w">   </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="n">st</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">load</span><span class="p">(</span><span class="n">sr</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">logger</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;No se pudo leer la información de versión.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">properties</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Usar la anotación <code class="docutils literal notranslate"><span class="pre">&#64;Command</span></code> sin atributos y en <code class="docutils literal notranslate"><span class="pre">.create</span></code> modificar la
forma en que se construye <code class="docutils literal notranslate"><span class="pre">CommandLine</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Config</span><span class="p">();</span>
<span class="c1">// Suponemos que ya hemos definido DEFAULT_PROPERTIES = &quot;/app.properties&quot;</span>
<span class="n">Properties</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">load</span><span class="p">(</span><span class="n">DEFAULT_PROPERTIES</span><span class="p">);</span>

<span class="n">CommandSpec</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CommandSpec</span><span class="p">.</span><span class="na">forAnnotatedObject</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
<span class="w">   </span><span class="p">.</span><span class="na">name</span><span class="p">(</span><span class="s">&quot;java -jar miapp.jar&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="p">.</span><span class="na">mixinStandardHelpOptions</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">   </span><span class="p">.</span><span class="na">versionProvider</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">VersionProvider</span><span class="p">(</span><span class="n">properties</span><span class="p">));</span>

<span class="n">spec</span><span class="p">.</span><span class="na">usageMessage</span><span class="p">().</span><span class="na">description</span><span class="p">(</span><span class="n">properties</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;app.description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Sin descripción &quot;</span><span class="p">));</span>
</pre></div>
</div>
</li>
<li><p>Creamos la clase <code class="docutils literal notranslate"><span class="pre">VersionProvider</span></code> para que el mensaje sobre la versión
incluya la información que nos interesa:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Hemos supuesto que hemos definido esta clase dentro de Config</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">VersionProvider</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CommandLine</span><span class="p">.</span><span class="na">IVersionProvider</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Properties</span><span class="w"> </span><span class="n">properties</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">VersionProvider</span><span class="p">(</span><span class="n">Properties</span><span class="w"> </span><span class="n">properties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getVersion</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">appName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;app.name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Sin nombre&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">appVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;app.version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;???&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">appDescription</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;app.description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Si descripción&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">Version</span><span class="w"> </span><span class="n">runtimeVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Runtime</span><span class="p">.</span><span class="na">version</span><span class="p">();</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">osName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;os.name&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">osVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;os.version&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">osArch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;os.arch&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%s v%s [JRE v%s. %s v%s (%s)]:&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">appName</span><span class="p">,</span>
<span class="w">                          </span><span class="n">appersion</span><span class="p">,</span><span class="w"> </span><span class="n">runtimeVersion</span><span class="p">,</span>
<span class="w">                          </span><span class="n">osName</span><span class="p">,</span><span class="w"> </span><span class="n">osVersion</span><span class="p">,</span><span class="w"> </span><span class="n">osArch</span><span class="p">),</span>
<span class="w">            </span><span class="s">&quot;   &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">appDescription</span><span class="p">,</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="10.logging.html"
       title="página anterior">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">anterior</p>
        <p class="prev-next-title"><span class="section-number">3. </span>Sistema de registros</p>
      </div>
    </a>
    <a class="right-next"
       href="80.maven.html"
       title="siguiente página">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">siguiente</p>
        <p class="prev-next-title"><span class="section-number">5. </span>Maven</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenido
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#principios">4.1. Principios</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objeto-config">4.2. Objeto <code class="docutils literal notranslate"><span class="pre">config</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#picocli">4.3. Picocli</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#basico">4.3.1. Básico</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conversores">4.3.2. Conversores</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#informacion-de-ayuda">4.3.3. Información de ayuda</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Por José Miguel Sánchez Alés
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright CC BY 4.0, 2024-2025, José Miguel Sánchez Alés.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>