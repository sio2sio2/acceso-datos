


<!DOCTYPE html>


<html lang="es" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.2.1. Jackson &#8212; documentación de Acceso a datos - rolling</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" href="../../_static/general.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/particular.css" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=461dccb6"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=677778c1"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../../_static/translations.js?v=f85f4cfb"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '02.formatos/02.json/01.jackson';</script>
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2.2.2. GSON" href="02.gson.html" />
    <link rel="prev" title="2.2. JSON" href="../02.json.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="es"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Saltar al contenido principal</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Volver arriba</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Advertencia de versión"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.jpg" class="logo__image only-light" alt="documentación de Acceso a datos - rolling - Home"/>
    <script>document.write(`<img src="../../_static/logo.jpg" class="logo__image only-dark" alt="documentación de Acceso a datos - rolling - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Búsqueda</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01.archivos/index.html">1. Tratamiento de archivos</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01.archivos/01.gestion.html">1.1. Gestión de archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01.archivos/02.manipulacion.html">1.2. Consulta y manipulación de contenidos</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">2. Formatos de información</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01.csv.html">2.1. <abbr title="Comma-Separated Values">CSV</abbr></a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../02.json.html">2.2. <abbr title="JavaScript Object Notation">JSON</abbr></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">2.2.1. Jackson</a></li>
<li class="toctree-l3"><a class="reference internal" href="02.gson.html">2.2.2. GSON</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../03.yaml.html">2.3. <abbr title="YAML Ain't Markup Language">YAML</abbr></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../03.xml/index.html">3. <abbr title="eXtensible Markup Language">XML</abbr></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../03.xml/01.jaxp.html">3.1. <abbr title="Java API for XML Processing">JAXP</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03.xml/02.jackson.html">3.2. Jackson</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03.xml/03.basex.html">3.3. BaseX</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../04.conector/index.html">4. Conectores</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../04.conector/01.basico.html">4.1. Operaciones básicas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../04.conector/02.datos.html">4.2. Datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../04.conector/03.transacciones.html">4.3. Transacciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../04.conector/04.pool.html">4.4. <em>Pool</em> de conexiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../04.conector/10.extras.html">4.5. Extras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../04.conector/15.dao.html">4.6. Programación con conectores</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../05.orm/index.html">5. Herramientas <abbr title="Object-Relational Mapping">ORM</abbr></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../05.orm/01.conf.html">5.1. Configuración</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../05.orm/02.basico.html">5.2. Operativa básica</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../05.orm/04.mapeo.html">5.3. Mapeo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../05.orm/08.transaction.html">5.4. Transacciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../05.orm/09.dao.html">5.5. Estrategias de diseño</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../05.orm/10.crud.html">5.6. Operaciones <abbr title="Create, Read, Update, Delete">CRUD</abbr></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../05.orm/10.crud/01.simples.html">5.6.1. Simples</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../05.orm/10.crud/02.avanzadas.html">5.6.2. Avanzadas</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../05.orm/10.crud/02.avanzadas/01.hql.html">5.6.2.1. <abbr title="Java Persistence Query Language">JPQL</abbr></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../05.orm/10.crud/02.avanzadas/02.criteria.html">5.6.2.2. Criteria API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../05.orm/10.crud/02.avanzadas/03.nativo.html">5.6.2.3. <abbr title="Structured Query Language">SQL</abbr> nativo</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../05.orm/15.extra.html">5.7. Otros aspectos</a></li>
</ul>
</details></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../99.ejercicios/index.html">Ejercicios</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../99.ejercicios/01.archivos.html">1. Archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../99.ejercicios/02.formatos.html">2. Formatos de información</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../99.ejercicios/03.xml.html">3. Formato <abbr title="eXtensible Markup Language">XML</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../99.ejercicios/04.conectores.html">4. <abbr title="Java DataBase Connectivity">JDBC</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../99.ejercicios/05.orm.html">5. <abbr title="Java Persistent API">JPA</abbr></a></li>
</ul>
</details></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../98.apendices/index.html">Apéndices</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../98.apendices/01.funcional.html">1. Java funcional</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../98.apendices/01.funcional/01.function.html">1.1. Interfaces funcionales</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../98.apendices/01.funcional/05.collection.html">1.2. Colecciones</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../98.apendices/01.funcional/10.flujos.html">1.3. Flujos</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../98.apendices/05.pattern.html">2. Patrones de diseño</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../98.apendices/10.logging.html">3. Sistema de registros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../98.apendices/15.cli.html">4. Análisis de la línea de órdenes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../98.apendices/80.maven.html">5. Maven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../98.apendices/99.ide.html">6. Visual Studio Code</a></li>
</ul>
</details></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../97.orientaciones/index.html">Orientaciones pedagógicas</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Descarga esta pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/02.formatos/02.json/01.jackson.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Descargar archivo fuente"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimir en PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Modo de pantalla completa"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="claro/oscuro" aria-label="claro/oscuro" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Jackson</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenido </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operativa-basica">2.2.1.1. Operativa básica</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lectura">2.2.1.1.1. Lectura</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#escritura">2.2.1.1.2. Escritura</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-del-mapeo">2.2.1.2. Configuración del mapeo</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-del-mapper">2.2.1.2.1. Creación del mapper</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anotaciones">2.2.1.2.2. Anotaciones</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#traduccion-de-tipos-no-primitivos">2.2.1.3. Traducción de tipos no primitivos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#traducciones-predefinidas">2.2.1.3.1. Traducciones predefinidas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#traductor-especifico">2.2.1.3.2. Traductor específico</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#control-de-la-serializacion">2.2.1.4. Control de la serialización</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="jackson">
<span id="json-jackson"></span><h1><span class="section-number">2.2.1. </span>Jackson<a class="headerlink" href="#jackson" title="Link to this heading">#</a></h1>
<p>Un potentísima librería, que tiene la ventaja de que también soporta <a class="reference internal" href="../../03.xml/index.html#xml"><span class="std std-ref">XML</span></a> es la proporcionada por el <a class="reference external" href="https://github.com/FasterXML/jackson">proyecto Jackson</a>, disponible en su <a class="reference external" href="https://mvnrepository.com/artifact/tools.jackson.core/jackson-databind">repositorio de
mvnrepository.com</a><a class="footnote-reference brackets" href="#id6" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>Permite hacer una conversión automática entre el modelo de objetos y <abbr title="JavaScript Object Notation">JSON</abbr>.
Para ilustrarlo, podemos definir las tres clases que modelas el <a class="reference internal" href="../02.json.html#grupos-json"><span class="std std-ref">archivo
json propuesto</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="class-tutor">
<div class="code-block-caption"><span class="caption-text">Tutor.java</span><a class="headerlink" href="#class-tutor" title="Link to this code">#</a></div>
<div class="toggle highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="k">class</span><span class="w"> </span><span class="nc">Tutor</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">String</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="n">private</span> <span class="n">String</span> <span class="n">especialidad</span><span class="p">;</span>

    <span class="n">public</span> <span class="n">Tutor</span><span class="p">()</span> <span class="p">{}</span>

    <span class="n">public</span> <span class="n">Tutor</span><span class="p">(</span><span class="n">String</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">String</span> <span class="n">especialidad</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">setNombre</span><span class="p">(</span><span class="n">nombre</span><span class="p">);</span>
        <span class="n">setEspecialidad</span><span class="p">(</span><span class="n">especialidad</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">String</span> <span class="n">getNombre</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setNombre</span><span class="p">(</span><span class="n">String</span> <span class="n">nombre</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">nombre</span> <span class="o">=</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">String</span> <span class="n">getEspecialidad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">especialidad</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setEspecialidad</span><span class="p">(</span><span class="n">String</span> <span class="n">especialidad</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">especialidad</span> <span class="o">=</span> <span class="n">especialidad</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">String</span> <span class="n">toString</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="class-alumno">
<div class="code-block-caption"><span class="caption-text">Alumno.java</span><a class="headerlink" href="#class-alumno" title="Link to this code">#</a></div>
<div class="toggle highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="k">class</span><span class="w"> </span><span class="nc">Alumno</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">String</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="n">private</span> <span class="n">LocalDate</span> <span class="n">fechaNacimiento</span><span class="p">;</span>

    <span class="n">public</span> <span class="n">Alumno</span><span class="p">()</span> <span class="p">{}</span>

    <span class="n">public</span> <span class="n">Alumno</span><span class="p">(</span><span class="n">String</span> <span class="n">nombre</span><span class="p">,</span> <span class="nb">int</span> <span class="n">edad</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">setNombre</span><span class="p">(</span><span class="n">nombre</span><span class="p">);</span>
        <span class="n">setEdad</span><span class="p">(</span><span class="n">edad</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">String</span> <span class="n">getNombre</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setNombre</span><span class="p">(</span><span class="n">String</span> <span class="n">nombre</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">this</span><span class="o">.</span><span class="n">nombre</span> <span class="o">=</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="p">}</span>

   <span class="n">public</span> <span class="n">LocalDate</span> <span class="n">getFechaNacimiento</span><span class="p">()</span> <span class="p">{</span>
       <span class="k">return</span> <span class="n">fechaNacimiento</span>
   <span class="p">}</span>

    <span class="n">public</span> <span class="nb">int</span> <span class="n">getEdad</span><span class="p">()</span> <span class="p">{</span>
       <span class="k">return</span> <span class="n">Perido</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">fechaNacimiento</span><span class="p">,</span> <span class="n">LocalDate</span><span class="o">.</span><span class="n">now</span><span class="p">())</span><span class="o">.</span><span class="n">getYears</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setFechaNacimiento</span><span class="p">(</span><span class="n">LocalDate</span> <span class="n">nacimiento</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">fechaNacimiento</span> <span class="o">=</span> <span class="n">nacimiento</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">String</span> <span class="n">toString</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">edad</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="class-grupo">
<div class="code-block-caption"><span class="caption-text">Grupo.java</span><a class="headerlink" href="#class-grupo" title="Link to this code">#</a></div>
<div class="toggle highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Arrays</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span><span class="w"> </span><span class="nc">Grupo</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">short</span> <span class="n">nivel</span><span class="p">;</span>
    <span class="n">private</span> <span class="n">String</span> <span class="n">etapa</span><span class="p">;</span>
    <span class="n">private</span> <span class="n">char</span> <span class="n">grupo</span><span class="p">;</span>
    <span class="n">private</span> <span class="n">Tutor</span> <span class="n">tutor</span><span class="p">;</span>
    <span class="n">private</span> <span class="n">Alumno</span><span class="p">[]</span> <span class="n">miembros</span><span class="p">;</span>

    <span class="n">public</span> <span class="n">Grupo</span><span class="p">()</span> <span class="p">{}</span>

    <span class="n">public</span> <span class="n">Grupo</span><span class="p">(</span><span class="n">short</span> <span class="n">nivel</span><span class="p">,</span> <span class="n">String</span> <span class="n">etapa</span><span class="p">,</span> <span class="n">char</span> <span class="n">grupo</span><span class="p">,</span> <span class="n">Tutor</span> <span class="n">tutor</span><span class="p">,</span> <span class="n">Alumno</span><span class="p">[]</span> <span class="n">miembros</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">setNivel</span><span class="p">(</span><span class="n">nivel</span><span class="p">);</span>
        <span class="n">setEtapa</span><span class="p">(</span><span class="n">etapa</span><span class="p">);</span>
        <span class="n">setGrupo</span><span class="p">(</span><span class="n">grupo</span><span class="p">);</span>
        <span class="n">setTutor</span><span class="p">(</span><span class="n">tutor</span><span class="p">);</span>
        <span class="n">setMiembros</span><span class="p">(</span><span class="n">miembros</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">short</span> <span class="n">getNivel</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">nivel</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setNivel</span><span class="p">(</span><span class="n">short</span> <span class="n">nivel</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">nivel</span> <span class="o">=</span> <span class="n">nivel</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">String</span> <span class="n">getEtapa</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">etapa</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setEtapa</span><span class="p">(</span><span class="n">String</span> <span class="n">etapa</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">etapa</span> <span class="o">=</span>  <span class="n">etapa</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">char</span> <span class="n">getGrupo</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">grupo</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setGrupo</span><span class="p">(</span><span class="n">char</span> <span class="n">grupo</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">grupo</span> <span class="o">=</span> <span class="n">grupo</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">Tutor</span> <span class="n">getTutor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tutor</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setTutor</span><span class="p">(</span><span class="n">Tutor</span> <span class="n">tutor</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">tutor</span> <span class="o">=</span> <span class="n">tutor</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">Alumno</span><span class="p">[]</span> <span class="n">getMiembros</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">miembros</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">setMiembros</span><span class="p">(</span><span class="n">Alumno</span><span class="p">[]</span> <span class="n">miembros</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">miembros</span> <span class="o">=</span> <span class="n">miembros</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">String</span> <span class="n">nombre</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">º</span><span class="si">%s</span><span class="s2">-</span><span class="si">%c</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">nivel</span><span class="p">,</span> <span class="n">etapa</span><span class="p">,</span> <span class="n">grupo</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">String</span> <span class="n">toString</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">): </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">nombre</span><span class="p">(),</span> <span class="n">tutor</span><span class="p">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">miembros</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>No nos hemos roto mucho la cabeza: estas tres clases recogen las propiedades que
se observan en el <abbr title="JavaScript Object Notation">JSON</abbr> y, además, cumplen los requisitos para ser un
<em>JavaBean</em>, aunque no es indispensable:</p>
<ul class="simple">
<li><p>Disponen de un constructor sin argumentos.</p></li>
<li><p>Sus atributos son privados.</p></li>
<li><p>Dispone de <em>getters</em> y <em>setters</em> con la convención de nombres apropiada.</p></li>
</ul>
<section id="operativa-basica">
<span id="json-jackson-basico"></span><h2><span class="section-number">2.2.1.1. </span>Operativa básica<a class="headerlink" href="#operativa-basica" title="Link to this heading">#</a></h2>
<p>Empecemos por ver cómo leer o escribir <a class="reference internal" href="../02.json.html#grupos-json"><span class="std std-ref">el archivo JSON de referencia</span></a>.</p>
<section id="lectura">
<span id="json-jackson-read"></span><h3><span class="section-number">2.2.1.1.1. </span>Lectura<a class="headerlink" href="#lectura" title="Link to this heading">#</a></h3>
<p>Básicamente, necesitamos un <em>mapper</em> y volcar los datos en el almacenamiento que
hayamos decidido:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Path</span><span class="w"> </span><span class="n">ruta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;user.home&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;grupos.json&quot;</span><span class="p">);</span>
<span class="hll"><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">();</span>
</span>
<span class="k">try</span><span class="p">(</span><span class="n">InputStream</span><span class="w"> </span><span class="n">st</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Files</span><span class="p">.</span><span class="na">newInputStream</span><span class="p">(</span><span class="n">ruta</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">    </span><span class="n">Grupo</span><span class="o">[]</span><span class="w"> </span><span class="n">grupos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">readValue</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="w"> </span><span class="n">Grupo</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span class="w">    </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">grupos</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">catch</span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">err</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Obsérvese que necesitamos indicar en qué objeto de <em>Java</em> se convertirán los
datos. Cuando es un objeto único es bien sencillo (<code class="docutils literal notranslate"><span class="pre">LaClaseDelObjeto.class</span></code>) y
en el caso de arrays, también. Pero cuando tenemos colecciones de datos basadas
en genéricos debemos recurrir a <a class="extlink-jackson-core reference external" href="https://javadoc.io/doc/tools.jackson.core/jackson-core/latest/tools.jackson.core/tools/jackson/core/type/TypeReference.html">TypeReference</a>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">TypeReference</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Grupo</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GrupoLista</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="n">TypeReference</span><span class="o">&lt;&gt;</span><span class="p">(){};</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Grupo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">grupos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">readValue</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span><span class="w"> </span><span class="n">GrupoLista</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Cuando los atributos de clases incluidas en la traducción
son secuencias, es indiferente que sea listas o <em>arrays</em>: la traducción
se lleva a cabo de igual forma. En nuestro ejemplo, es el caso del atributo
<code class="docutils literal notranslate"><span class="pre">miembros</span></code> de <a class="reference internal" href="#class-grupo"><span class="std std-ref">Grupo</span></a>, que lo hemos definido como un
<em>array</em>, pero podría perfectamente ser una lista.</p>
</div>
</section>
<section id="escritura">
<span id="json-jackson-write"></span><h3><span class="section-number">2.2.1.1.2. </span>Escritura<a class="headerlink" href="#escritura" title="Link to this heading">#</a></h3>
<p>Por su parte la escritura a un <abbr title="JavaScript Object Notation">JSON</abbr> tampoco es excesivamente complicada:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">Grupo</span><span class="o">[]</span><span class="w"> </span><span class="n">grupos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Grupo</span><span class="p">(</span>
<span class="w">            </span><span class="p">(</span><span class="kt">short</span><span class="p">)</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;ESO&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="sc">&#39;B&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Tutor</span><span class="p">(</span><span class="s">&quot;Pepe M.J.&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Matemáticas&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Alumno</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="k">new</span><span class="w"> </span><span class="n">Alumno</span><span class="p">(</span><span class="s">&quot;Pablito&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)),</span>
<span class="w">               </span><span class="k">new</span><span class="w"> </span><span class="n">Alumno</span><span class="p">(</span><span class="s">&quot;Juanito&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">))</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Grupo</span><span class="p">(</span>
<span class="w">            </span><span class="p">(</span><span class="kt">short</span><span class="p">)</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;ESO&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="sc">&#39;C&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Tutor</span><span class="p">(</span><span class="s">&quot;Pedro J.M.&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Lengua&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Alumno</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="k">new</span><span class="w"> </span><span class="n">Alumno</span><span class="p">(</span><span class="s">&quot;Lola&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">)),</span>
<span class="w">               </span><span class="k">new</span><span class="w"> </span><span class="n">Alumno</span><span class="p">(</span><span class="s">&quot;Manolito&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">))</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="n">Path</span><span class="w"> </span><span class="n">ruta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;java.io.tmpdir&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;grupos.json&quot;</span><span class="p">);</span>
<span class="hll"><span class="w">    </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">();</span>
</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">OutputStream</span><span class="w"> </span><span class="n">st</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Files</span><span class="p">.</span><span class="na">newOutputStream</span><span class="p">(</span><span class="n">ruta</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">        </span><span class="n">mapper</span><span class="p">.</span><span class="na">writeValue</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="w"> </span><span class="n">grupos</span><span class="p">);</span>
</span><span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">err</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Como se ve el método que realiza la escritura al formato recibe los datos, de
los cuales puede deducir el tipo y, por consiguiente, no tiene relevancia si
volcamos un objeto o una secuencia de la naturaleza que sea.</p>
<div class="admonition tip">
<p class="admonition-title">Truco</p>
<p>Existe el método <code class="docutils literal notranslate"><span class="pre">writeValueAsString</span></code> que devuelve una cadena con el
<abbr title="JavaScript Object Notation">JSON</abbr> resultante:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">String</span><span class="w"> </span><span class="n">contenido</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">writeValueAsString</span><span class="p">(</span><span class="n">grupos</span><span class="p">);</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="configuracion-del-mapeo">
<span id="json-jackson-conf"></span><h2><span class="section-number">2.2.1.2. </span>Configuración del mapeo<a class="headerlink" href="#configuracion-del-mapeo" title="Link to this heading">#</a></h2>
<p>Bajo el epígrafe anterior hemos hecho una traducción muy sencilla en la que no
hemos definido ninguna característica particular para la lectura o la escritura
del <abbr title="JavaScript Object Notation">JSON</abbr> ni hemos necesitado afinar la traducción de los atributos del objeto:
se llaman igual en Java y en <abbr title="JavaScript Object Notation">JSON</abbr>, no hemos necesitado evitar ninguno, todos
son traducibles directamente a algún tipo existente en el formato <abbr title="JavaScript Object Notation">JSON</abbr>.</p>
<p>Lo habitual en cambio es que necesitemos configurar el mapeo y eso es lo que
veremos ahora.</p>
<section id="creacion-del-mapper">
<h3><span class="section-number">2.2.1.2.1. </span>Creación del mapper<a class="headerlink" href="#creacion-del-mapper" title="Link to this heading">#</a></h3>
<p>Cuando queremos configurar las características del mapeo, no debemos crear el
<em>mapper</em> directamente como hicimos anteriormente:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">();</span><span class="w">  </span><span class="c1">// Inmutable, no se puede configurar.</span>
</pre></div>
</div>
<p>ya que a partir de la versión 3 de <em>Jackson</em> <a class="reference external" href="https://cowtowncoder.medium.com/jackson-3-0-immutability-w-builders-d9c532860d88">los objetos de mapeos son
inmutables</a>
y no pueden configurarse después de haberse creado.</p>
<p>El proceso completo de creación de un mapeo tiene tres fases:</p>
<ol class="arabic simple">
<li><p>Creación de un <em>Factory</em> (<a class="extlink-jackson-core reference external" href="https://javadoc.io/doc/tools.jackson.core/jackson-core/latest/tools.jackson.core/tools/jackson/core/json/JsonFactory.html">JsonFactory</a>), en
la que podemos ajustar características de serialización
(<a class="extlink-jackson-core reference external" href="https://javadoc.io/doc/tools.jackson.core/jackson-core/latest/tools.jackson.core/tools/jackson/core/json/JsonWriteFeature.html">JsonWriteFeature</a>) y deserialización
(<a class="extlink-jackson-core reference external" href="https://javadoc.io/doc/tools.jackson.core/jackson-core/latest/tools.jackson.core/tools/jackson/core/json/JsonReadFeature.html">JsonReadFeature</a>) propias del formato (<abbr title="JavaScript Object Notation">JSON</abbr> en este caso).</p></li>
<li><p>Creación de un <em>Builder</em> (<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/json/JsonMapper.Builder.html">JsonMapper.Builder</a>), en la que podremos añadir
módulos (los veremos más adelante), características generales de serialización
(<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/SerializationFeature.html">SerializationFeature</a>) y deserialización (<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/DeserializationFeature.html">DeserializationFeature</a>), y
complementar la definición las clases del modelo con la técnica del <em>MixIn</em>.</p></li>
<li><p>Creación del <em>Mapper</em> propiamente (<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/json/JsonMapper.html">JsonMapper</a>).</p></li>
</ol>
<p>Ilustrémoslo:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">JsonFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonFactory</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">     </span><span class="p">.</span><span class="na">enable</span><span class="p">(</span><span class="n">JsonReadFeature</span><span class="p">.</span><span class="na">ALLOW_JAVA_COMMENTS</span><span class="p">)</span><span class="w">  </span><span class="c1">// Características particulares de de/serialización</span>
<span class="w">     </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="c1">// MapperBuilder&lt;?, ?&gt; o JsonMapper.Builder, que es la clase padre.</span>
<span class="n">MapperBuilder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="n">factory</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="na">enable</span><span class="p">(</span><span class="n">SerializationFeature</span><span class="p">.</span><span class="na">INDENT_OUTPUT</span><span class="p">)</span><span class="w">  </span><span class="c1">// Características generales de de/serialización</span>
<span class="w">     </span><span class="p">.</span><span class="na">addModule</span><span class="p">(</span><span class="n">module</span><span class="p">)</span><span class="w">      </span><span class="c1">// Supongamos que hemos definido ese modulo. Ya se tratará más adelante</span>
<span class="w">     </span><span class="p">.</span><span class="na">addMixIn</span><span class="p">(</span><span class="n">Grupo</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">GrupoMixin</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">   </span><span class="c1">// Mezclamos (ya veremos la utilidad)</span>

<span class="w"> </span><span class="c1">// ObjectMapper o JsonMapper, que es la clase padre.</span>
<span class="w"> </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/cfg/MapperBuilder.html">MapperBuilder</a> y <a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/ObjectMapper.html">ObjectMapper</a> son clases padre que se comparten con
otros formatos como <abbr title="YAML Ain't Markup Language">YAML</abbr> o <abbr title="eXtensible Markup Language">XML</abbr>. Si nuestra intención es soportar varios
formatos, es probable que nos convenga definir <code class="docutils literal notranslate"><span class="pre">builder</span></code> y <code class="docutils literal notranslate"><span class="pre">mapper</span></code> como
de estas clases respectivamente en vez de las clases más concretas
<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/json/JsonMapper.Builder.html">JsonMapper.Builder</a> y <a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/json/JsonMapper.html">JsonMapper</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Truco</p>
<p>El ejemplo ilustra cómo puede habilitarse con <code class="docutils literal notranslate"><span class="pre">.enable()</span></code> una
característica de serialización que por defecto esté desactiva. y obviamente
puede hacerse al contrario con <code class="docutils literal notranslate"><span class="pre">.disable()</span></code>. También existe <code class="docutils literal notranslate"><span class="pre">.configure()</span></code>
que añade un segundo argumento <em>booleano</em> para expresar si se quiere
habilitada o deshabilitada la característica:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">JsonFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonFactory</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">     </span><span class="p">.</span><span class="na">configure</span><span class="p">(</span><span class="n">JsonReadFeature</span><span class="p">.</span><span class="na">ALLOW_JAVA_COMMENTS</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>El control de la serialización puede hacerse de un modo más exhaustivo
utilizando el <a class="reference internal" href="#jackson-writer"><span class="std std-ref">concepto de writer</span></a>. Lo introduciremos más adelante.</p>
</div>
<p>Estás tres etapas pueden simplificarse si necesitamos menos configuración. Ya hemos
visto que pueden reducirse a una, si no necesitamos configuración adicional en
absoluto:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">();</span>
</pre></div>
</div>
<p>O a dos, si no necesitamos añadir características particulares de serialización
o deserialización:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="n">MapperBuilder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span><span class="w"> </span><span class="c1">// No hemos definido factory.</span>
</span><span class="w">     </span><span class="p">.</span><span class="na">enable</span><span class="p">(</span><span class="n">SerializationFeature</span><span class="p">.</span><span class="na">INDENT_OUTPUT</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="na">addModule</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="na">addMixIn</span><span class="p">(</span><span class="n">Grupo</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">GrupoMixin</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="anotaciones">
<span id="json-jackson-annotations"></span><h3><span class="section-number">2.2.1.2.2. </span>Anotaciones<a class="headerlink" href="#anotaciones" title="Link to this heading">#</a></h3>
<p>Hemos visto muy por encima cómo trasladar objetos a <abbr title="JavaScript Object Notation">JSON</abbr> y viceversa. La regla
es que cada atributo del objeto se traduce en una propiedad <abbr title="JavaScript Object Notation">JSON</abbr> con el mismo
nombre y que conserva el mismo valor<a class="footnote-reference brackets" href="#id7" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. Centrémonos en <a class="reference internal" href="#class-alumno"><span class="std std-ref">Alumno</span></a>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumno</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Atributos</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Resto de la implementación</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La serialización de un objeto <code class="docutils literal notranslate"><span class="pre">Grupo</span></code> será esta:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Matías Sánchez Aguado&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;fechaNacimiento&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2010-05-15&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ahora bien, ¿cómo puede personalizarse la serialización para cambiar el nombre
de un atributo o no serializarlo? La librería para ello utiliza <a class="reference external" href="https://www.geeksforgeeks.org/java/annotations-in-java/">anotaciones</a> que permiten indicar
todos estos particulares:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumno</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Atributos</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span>

<span class="hll"><span class="w">    </span><span class="nd">@JsonProperty</span><span class="p">(</span><span class="s">&quot;nacimiento&quot;</span><span class="p">)</span>
</span><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ...</span>

<span class="hll"><span class="w">    </span><span class="nd">@JsonIgnore</span>
</span><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getEdad</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">Period</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">fechaNacimiento</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">()).</span><span class="na">getYears</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>De esta forma logramos que en el <abbr title="JavaScript Object Notation">JSON</abbr> la propiedad no sea
<code class="docutils literal notranslate"><span class="pre">fechaNacimiento</span></code>, sino <code class="docutils literal notranslate"><span class="pre">nacimiento</span></code>. Además, el método que nos devuelve la
edad tiene forma de <em>getter</em> por lo que <em>Jackson</em> lo entenderá como tal y
escribirá en el <abbr title="JavaScript Object Notation">JSON</abbr> la propiedad <em>edad</em>, sin que esta exista realmente en el
modelo de datos. Por eso añadimos la anotación <code class="docutils literal notranslate"><span class="pre">&#64;JsonIgnore</span></code>.</p>
<p>El problema de anotar directamente la clase es que quizás no nos resulte
elegante o directamente no podamos, porque no dependa de nosotros la definición.
Para poder añadir anotaciones sin modificar la clase original, <em>Jackson</em>
proporciona un mecanismo: la mezcla. Para ello podríamos definir aparte otra
clase distinta que contenga exclusivamente los atributos que necesitan
anotación:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AlumnoMixin</span><span class="w"> </span><span class="p">{</span>

<span class="w">   </span><span class="nd">@JsonProperty</span><span class="p">(</span><span class="s">&quot;nacimiento&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">nacimiento</span><span class="p">;</span>

<span class="w">   </span><span class="nd">@JsonIgnore</span>
<span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getEdad</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Luego, al definir el mapeo. se declara que deseamos mezclar la clase original
con la clase abstracta anotada:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">MapperBuilder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="n">factory</span><span class="p">)</span>
<span class="hll"><span class="w">     </span><span class="p">.</span><span class="na">addMixIn</span><span class="p">(</span><span class="n">Alumno</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">AlumnoMixin</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span></pre></div>
</div>
<p>Existen otras anotaciones interesante que introduciremos más adelante.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Al <a class="reference internal" href="../../03.xml/02.jackson.html#xml-jackson"><span class="std std-ref">serializar en formato XML</span></a> con esta librería,
las anotaciones se vuelven imprescindibles, porque es la única forma de
indicar, entre otras cosas, si un atributo de la clase será un elemento o un
atributo <abbr title="eXtensible Markup Language">XML</abbr>.</p>
</div>
</section>
</section>
<section id="traduccion-de-tipos-no-primitivos">
<span id="json-jackson-no-primitivos"></span><h2><span class="section-number">2.2.1.3. </span>Traducción de tipos no primitivos<a class="headerlink" href="#traduccion-de-tipos-no-primitivos" title="Link to this heading">#</a></h2>
<p>En el ejemplo anterior todos los atributos de los objetos de <em>Java</em> tienen una
correspondencia con un tipo primitivo de <abbr title="JavaScript Object Notation">JSON</abbr>: cadenas, números, secuencias
(ya sean <code class="docutils literal notranslate"><span class="pre">Array</span></code> o <a class="extlink-java-util reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/ArrayList.html">ArrayList</a>) excepto uno del que no
nos hemos preocupado, por lo que no hemos defino cómo debe ser su serialización.</p>
<section id="traducciones-predefinidas">
<h3><span class="section-number">2.2.1.3.1. </span>Traducciones predefinidas<a class="headerlink" href="#traducciones-predefinidas" title="Link to this heading">#</a></h3>
<p>Tampoco es necesario definir una traducción específica en otros casos en que no
hay correspondencia, pero <em>Jackson</em> nos provee una predeterminada:</p>
<dl>
<dt><strong>Enumeraciones</strong> (<a class="extlink-java-lang reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Enum.html">Enum</a>),</dt><dd><p>Si se pretende que la traducción a  <abbr title="JavaScript Object Notation">JSON</abbr> sean las constantes de enumeración
convertidas a cadenas. Por ejemplo, en este caso:</p>
<div class="highlight-java notranslate" id="etapa-enum"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">Etapa</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">INFANTIL</span><span class="p">,</span>
<span class="w">  </span><span class="n">PRIMARIA</span><span class="p">,</span>
<span class="w">  </span><span class="n">ESO</span><span class="p">,</span>
<span class="w">  </span><span class="n">BACHILLERATO</span><span class="p">,</span>
<span class="w">  </span><span class="n">FP</span><span class="p">,</span>
<span class="w">  </span><span class="n">UNIVERSIDAD</span><span class="p">;</span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Devuelve en enum a partir de su ordinal</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Etapa</span><span class="w"> </span><span class="nf">indexOf</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ordinal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">Etapa</span><span class="p">.</span><span class="na">values</span><span class="p">()</span><span class="o">[</span><span class="n">ordinal</span><span class="o">]</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>los valores se verán como las cadenas <em>INFANTIL</em>, <em>PRIMARIA</em>, <em>ESO</em> en el <abbr title="JavaScript Object Notation">JSON</abbr>.
De hecho, podríamos definir el atributo <code class="docutils literal notranslate"><span class="pre">etapa</span></code> de <a class="reference internal" href="#class-grupo"><span class="std std-ref">Grupo</span></a> como
de tipo <code class="docutils literal notranslate"><span class="pre">Etapa</span></code> y todo seguiría funcionado perfectamente.</p>
</dd>
</dl>
<span id="json-jackson-date"></span><dl id="json-jackson-localdate">
<dt><strong>Fechas</strong></dt><dd><p>Tanto si se usa el antiguo <a class="extlink-java-util reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/Date.html">Date</a> como el moderno
<a class="extlink-java-time reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/time/LocalDate.html">LocalDate</a>, no es necesario definir ningúna traducción si se
pretenden trasladar a cadenas según el <a class="reference external" href="https://es.wikipedia.org/wiki/ISO_8601">estándar ISO-8601</a>, es decir, si se escriben en el
<abbr title="JavaScript Object Notation">JSON</abbr> de la forma <code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span></code><a class="footnote-reference brackets" href="#id8" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a><a class="footnote-reference brackets" href="#id9" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>.</p>
<p>Si la forma de la cadena es otra (p.ej. <code class="docutils literal notranslate"><span class="pre">dd/MM/yyyy</span></code>) aún es posible de
manera sencilla indicárselo a la librería mediante una anotación. Imaginemos
que en vez de almacenar la edad, almacenamos la fecha de nacimiento del
alumno:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@JsonFormat</span><span class="p">(</span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonFormat</span><span class="p">.</span><span class="na">Shape</span><span class="p">.</span><span class="na">STRING</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;dd/MM/yyyy&quot;</span><span class="p">)</span>
<span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">;</span>

<span class="cm">/* ... */</span>

<span class="cm">/**</span>
<span class="cm"> * &quot;Atributo&quot; calculado a partir de la fecha de nacimiento.</span>
<span class="cm"> * Como le hemos dado la forma de un getter, Jackson lo tomará como</span>
<span class="cm"> * tal y al escribir el alumno incluirá la propiedad &quot;edad&quot;. Por eso,</span>
<span class="cm"> * especificamos que lo salte.</span>
<span class="cm"> */</span>
<span class="nd">@JsonIgnore</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getEdad</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">Period</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">fechaNacimiento</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">()).</span><span class="na">getYears</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@JsonFormat</span><span class="p">(</span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonFormat</span><span class="p">.</span><span class="na">Shape</span><span class="p">.</span><span class="na">STRING</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;dd/MM/yyyy&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">timezone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Europe/Madrid&quot;</span><span class="p">)</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">;</span>
</pre></div>
</div>
<p>Este último método, no obstante, sólo sirve para especificar la traducción de
un atributo en concreto. Si se quiere una configuración que afecte a todos los
atributos que contengan fechas, entonces el modo de obrar difiere entre uno y
otro tipo:</p>
<dl>
<dt><a class="extlink-java-util reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/Date.html">Date</a></dt><dd><p>Podemos especificar el formato de fecha al crear el <em>Builder</em>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">MapperBuilder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="n">factory</span><span class="p">)</span>
<span class="hll"><span class="w">   </span><span class="p">.</span><span class="na">defaultDateFormat</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s">&quot;dd/MM/yyyy&quot;</span><span class="p">))</span>
</span><span class="hll"><span class="w">   </span><span class="p">.</span><span class="na">defaultTimeZone</span><span class="p">(</span><span class="n">TimeZone</span><span class="p">.</span><span class="na">getTimeZone</span><span class="p">(</span><span class="s">&quot;Europe/Madrid&quot;</span><span class="p">));</span><span class="w">  </span><span class="c1">// o TimeZone.getDefault()</span>
</span></pre></div>
</div>
<p>Como se ve también es conveniente especificar la zona horaria.</p>
</dd>
<dt><a class="extlink-java-time reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/time/LocalDate.html">LocalDate</a></dt><dd><p>La configuración difiere porque hay que hacerla definiendo un módulo:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">DateTimeFormatter</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;dd/MM/yyyy&quot;</span><span class="p">);</span>

<span class="n">SimpleModule</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleModule</span><span class="p">();</span>
<span class="n">module</span><span class="p">.</span><span class="na">addSerializer</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LocalDateSerializer</span><span class="p">(</span><span class="n">pattern</span><span class="p">))</span>
<span class="n">module</span><span class="p">.</span><span class="na">addDeserializer</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LocalDateDeserializer</span><span class="p">(</span><span class="n">pattern</span><span class="p">));</span>

<span class="w"> </span><span class="n">MapperBuilder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="n">factory</span><span class="p">)</span>
<span class="hll"><span class="w">    </span><span class="p">.</span><span class="na">addModule</span><span class="p">(</span><span class="n">module</span><span class="p">);</span>
</span></pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="traductor-especifico">
<h3><span class="section-number">2.2.1.3.2. </span>Traductor específico<a class="headerlink" href="#traductor-especifico" title="Link to this heading">#</a></h3>
<p>La librería incluye un mecanismo para hacer traducciones totalmente arbitrarias
de cualquier tipo que se nos pueda ocurrir. Ilustrémoslo con la serialización y
deserialización artesanal de una tipo <a class="extlink-java-time reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/time/LocalDate.html">LocalDate</a>, aunque ya esté resuelto
en la propia librería. Sin embargo, nos sirve para ilustrarlo:</p>
<div class="admonition caution">
<p class="admonition-title">Prudencia</p>
<p>Lo que exponemos ahora <strong>ya está resuelto</strong> en <em>Jackson</em> con
<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/ext/javatime/ser/LocalDateSerializer.html">LocalDateSerializer</a> y <a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/ext/javatime/deser/LocalDateDeserializer.html">LocalDateDeserializer</a> (como acabamos de ver) por lo
que no tiene mucho sentido perder el tiempo en reimplementarlo.  Sin embargo,
es didácticamente pertinente porque nos sirve para ilustrar cómo definir
serializadores y deserializadores.</p>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Traductor</span><span class="w"> </span><span class="p">{</span>

<span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyy-MM-dd&quot;</span><span class="p">);</span>
</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DateSerializer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JsonSerializer</span><span class="o">&lt;</span><span class="n">LocalDate</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">JsonGenerator</span><span class="w"> </span><span class="n">gen</span><span class="p">,</span><span class="w"> </span><span class="n">SerializerProvider</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">JsonProcessingException</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">gen</span><span class="p">.</span><span class="na">writeNull</span><span class="p">();</span>
<span class="hll"><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="n">gen</span><span class="p">.</span><span class="na">writeString</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">value</span><span class="p">));</span><span class="w">     </span><span class="c1">// LocalDate --&gt; String</span>
</span><span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DateDeserializer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JsonDeserializer</span><span class="o">&lt;</span><span class="n">Date</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="nf">deserialize</span><span class="p">(</span><span class="n">JsonParser</span><span class="w"> </span><span class="n">parser</span><span class="p">,</span><span class="w"> </span><span class="n">DeserializationContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">JsonProcessingException</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">                   </span><span class="k">return</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">parser</span><span class="p">.</span><span class="na">getText</span><span class="p">(),</span><span class="w"> </span><span class="n">df</span><span class="p">);</span><span class="w">  </span><span class="c1">// String --&gt; LocalDate</span>
</span><span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">catch</span><span class="p">(</span><span class="n">ParseException</span><span class="w"> </span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                   </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En definitiva, al serializar tenemos que indicar cómo pasar del tipo a una
cadena (que será la que se escriba en el <abbr title="JavaScript Object Notation">JSON</abbr>), y al deserializar cómo pasar
de la cadena que aparece en el <abbr title="JavaScript Object Notation">JSON</abbr> al tipo de Java correspondiente.</p>
<p>Y ya sólo quedaría indicar el campo en que se va a usar este traductor:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@JsonSerialize</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">Traductor</span><span class="p">.</span><span class="na">DateSerializer</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@JsonDeserialize</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">Traductor</span><span class="p">.</span><span class="na">DateDeserializer</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">private</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">nacimiento</span><span class="p">;</span>
</pre></div>
</div>
<p>Y en caso de que hubiera varios atributos <a class="extlink-java-time reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/time/LocalDate.html">LocalDate</a> en
las clases implicadas y todas se quieran traducir igual, podríamos ahorrarnos la
anotación individual en cada uno de los atributos y hacer lo siguiente:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="n">SimpleModule</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleModule</span><span class="p">();</span>

<span class="w"> </span><span class="n">module</span><span class="p">.</span><span class="na">addSerializer</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Date</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Traductor</span><span class="p">.</span><span class="na">DateSerializer</span><span class="p">());</span>
<span class="w"> </span><span class="n">module</span><span class="p">.</span><span class="na">addDeserializer</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Date</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Traductor</span><span class="p">.</span><span class="na">DateDeserializer</span><span class="p">());</span>


<span class="n">MapperBuilder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="n">factory</span><span class="p">)</span>
<span class="w"> </span><span class="p">.</span><span class="na">addModule</span><span class="p">(</span><span class="n">module</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Truco</p>
<p>Obsérvese que el mecanismo específico para definir el <a class="reference internal" href="#json-jackson-localdate"><span class="std std-ref">formato de
las fechas LocalDate</span></a> es equivalente a este que
indicamos ahora. Simplemente las clases serializadora (<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/ext/javatime/ser/LocalDateSerializer.html">LocalDateSerializer</a>)
y deserializadora (<a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/ext/javatime/deser/LocalDateDeserializer.html">LocalDateDeserializer</a>) ya están definidas y nos
limitamos a usarlas en vez de definirlas nosotros.</p>
</div>
</section>
</section>
<section id="control-de-la-serializacion">
<span id="jackson-writer"></span><h2><span class="section-number">2.2.1.4. </span>Control de la serialización<a class="headerlink" href="#control-de-la-serializacion" title="Link to this heading">#</a></h2>
<p class="rubric">Características generales de serialización</p>
<p>Ya hemos dicho que algunas características generales de la serialización
independientes al formato de traducción puede configurarse antes de crear el
mapeador. Hay, sin embargo, otro mecanismo más potente para definir la
serialización hacia el formato: definir un <a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/ObjectWriter.html">ObjectWriter</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">build</span><span class="p">();</span><span class="w">  </span><span class="c1">// Mapper inmutable.</span>
<span class="n">ObjectWriter</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">writer</span><span class="p">()</span>
<span class="w">   </span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">Serialization</span><span class="p">.</span><span class="na">INDENT_OUTPUT</span><span class="p">);</span>

<span class="c1">// Ahora usamos el writer (en vez del mapper) para escribir los datos</span>

<span class="hll"><span class="n">writer</span><span class="p">.</span><span class="na">writeValue</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="w"> </span><span class="n">datos</span><span class="p">);</span>
</span></pre></div>
</div>
<p class="rubric" id="jackson-writer-wrapper">Filtrado de atributos.</p>
<p>Puede darse el caso de que no quiera almacenarse toda la información contenida
en el modelo de datos. La solución general es crear <abbr title="Data Transfer Object">DTO</abbr>s, pero <em>Jackson</em>
tiene algunas herramientas que nos permiten ahorrarnos la definición de estos
objetos.</p>
<p>En concreto, nos facilita dos herramientas: las <strong>vistas</strong>, que permiten hacer un
filtrado estático basado en anotaciones, y los <strong>filtros</strong>, que permiten la
definición de filtrados programáticos. Para ilustrarlas supongamos que tenemos
más información referente a los alumnos:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumno</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">;</span>
<span class="hll"><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">telefono</span><span class="p">;</span>
</span><span class="hll"><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">dni</span><span class="p">;</span>
</span>
<span class="w">   </span><span class="c1">// Resto de la definición de la clase.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Los datos de los alumnos no tienen la misma confidencialidad, así que nos podría
interesar proporcionar más o menos información. Para ello se definen tres
<em>vistas</em> de menor a mayor confidencialidad:</p>
<ul class="simple">
<li><p>Views.Public</p></li>
<li><p>Views.Internal</p></li>
<li><p>Views.Admin</p></li>
</ul>
<p>Al anotar la clase podemos indicar a qué vista queremos que pertenezca el
atributo:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumno</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">   </span><span class="nd">@JsonView</span><span class="p">(</span><span class="n">Views</span><span class="p">.</span><span class="na">Public</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
</span><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span>

<span class="w">   </span><span class="c1">// No pertenece a ninguna vista así que se muestra siempre.</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fechaNacimiento</span><span class="p">;</span>

<span class="hll"><span class="w">   </span><span class="nd">@JsonView</span><span class="p">(</span><span class="n">Views</span><span class="p">.</span><span class="na">Internal</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
</span><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">telefono</span><span class="p">;</span>

<span class="hll"><span class="w">   </span><span class="nd">@JsonView</span><span class="p">(</span><span class="n">Views</span><span class="p">.</span><span class="na">Admin</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
</span><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">dni</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Definida la <em>vista</em> de cada atributo, en el momento de serializar podemos
indicar al objeto <a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/ObjectWriter.html">ObjectWriter</a> qué vista debe escribir. En nuestro ejemplo:</p>
<ul class="simple">
<li><p>Sin vista, sólo se serializará sólo <code class="docutils literal notranslate"><span class="pre">fechaNacimiento</span></code>.</p></li>
<li><p>Con Views.Public se serializará <code class="docutils literal notranslate"><span class="pre">fechaNacimiento</span></code> y <code class="docutils literal notranslate"><span class="pre">nombre</span></code>.</p></li>
<li><p>Con Views.Internal se añadirá a las anteriores el teléfono.</p></li>
<li><p>Con Views.Admin se serializarán todos los atributos.</p></li>
</ul>
<p>Para escribir con vistas, simplemente, debemos crear un <em>writer</em> y ajustar la
vista:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectWriter</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">writer</span><span class="p">()</span>
<span class="hll"><span class="w">   </span><span class="p">.</span><span class="na">withWithView</span><span class="p">(</span><span class="n">Views</span><span class="p">.</span><span class="na">Public</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span>
<span class="n">writer</span><span class="p">.</span><span class="na">writeValueAsString</span><span class="p">(</span><span class="n">grupos</span><span class="p">);</span>
</pre></div>
</div>
<p>El otro mecanismo para filtrar atributos es usar <strong>filtros</strong>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="n">FilterProvider</span><span class="w"> </span><span class="n">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleFilterProvider</span><span class="p">()</span>
</span><span class="hll"><span class="w">   </span><span class="p">.</span><span class="na">addFilters</span><span class="p">(</span><span class="s">&quot;filtro&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="w">      </span><span class="n">SimpleBeanPropertyFilter</span><span class="p">.</span><span class="na">serializeAllExcept</span><span class="p">(</span><span class="s">&quot;telefono&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dni&quot;</span><span class="p">));</span>
</span>
<span class="c1">// También existe .filterOutAllExcept</span>

<span class="hll"><span class="n">ObjectWriter</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">writer</span><span class="p">(</span><span class="n">filters</span><span class="p">);</span>
</span><span class="n">writer</span><span class="p">.</span><span class="na">writeAsValueAsString</span><span class="p">(</span><span class="n">grupos</span><span class="p">);</span>
</pre></div>
</div>
<p class="rubric">Notas al pie</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>La librería se descompone en varias con <a class="reference external" href="https://mvnrepository.com/artifact/tools.jackson.core/jackson-databind">jackson-databind</a>
tendremos soporte básico para <abbr title="JavaScript Object Notation">JSON</abbr>, que es el formato base.</p>
</aside>
<aside class="footnote brackets" id="id7" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Siempre que el tipo, claro está, sea un primitivo de <abbr title="JavaScript Object Notation">JSON</abbr> (p. ej. una
cadena). Si no lo es entonces habrá que definir cómo realizar la traducción,
cosa que expondremos en <a class="reference internal" href="#json-jackson-no-primitivos"><span class="std std-ref">Traducción de tipos no primitivos</span></a>.</p>
</aside>
<aside class="footnote brackets" id="id8" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">3</a><span class="fn-bracket">]</span></span>
<p>De hecho, es de este tipo la única excepción que incluimos en nuestro
ejemplo: hay un dato de tipo <a class="extlink-java-time reference external" href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/time/LocalDate.html">LocalDate</a>, pero como su
representación a cadena fue la estándar no nos preocupamos de su
serialización.</p>
</aside>
<aside class="footnote brackets" id="id9" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">4</a><span class="fn-bracket">]</span></span>
<p>En realidad, si en vez de una cadena, el <abbr title="JavaScript Object Notation">JSON</abbr> presenta un número,
entonces la librería entenderá que el tiempo se ha definido en <a class="reference external" href="https://es.wikipedia.org/wiki/Tiempo_Unix">tiempo
UNIX</a>. La escritura siempre será
en forma de cadena, a menos que se use <a class="extlink-jackson-databind reference external" href="https://www.javadoc.io/doc/tools.jackson.core/jackson-databind/latest/tools.jackson.databind/tools/jackson/databind/cfg/DateTimeFeature.html">DateTimeFeature</a> para cambiar el comportamiento:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">MapperBuilder</span><span class="o">&lt;?</span><span class="p">,</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonMapper</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="n">factory</span><span class="p">)</span>
<span class="hll"><span class="w">   </span><span class="p">.</span><span class="na">enable</span><span class="p">(</span><span class="n">DateTimeFeature</span><span class="p">.</span><span class="na">WRITE_DATES_AS_TIMESTAMPS</span><span class="p">);</span>
</span></pre></div>
</div>
<p>De hecho, la traducción a tiempo <em>UNIX</em> era el comportamiento predeterminado
en <em>Jackson 2</em>.</p>
</aside>
</aside>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../02.json.html"
       title="página anterior">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">anterior</p>
        <p class="prev-next-title"><span class="section-number">2.2. </span><abbr title="JavaScript Object Notation">JSON</abbr></p>
      </div>
    </a>
    <a class="right-next"
       href="02.gson.html"
       title="siguiente página">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">siguiente</p>
        <p class="prev-next-title"><span class="section-number">2.2.2. </span>GSON</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenido
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operativa-basica">2.2.1.1. Operativa básica</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lectura">2.2.1.1.1. Lectura</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#escritura">2.2.1.1.2. Escritura</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-del-mapeo">2.2.1.2. Configuración del mapeo</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-del-mapper">2.2.1.2.1. Creación del mapper</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anotaciones">2.2.1.2.2. Anotaciones</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#traduccion-de-tipos-no-primitivos">2.2.1.3. Traducción de tipos no primitivos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#traducciones-predefinidas">2.2.1.3.1. Traducciones predefinidas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#traductor-especifico">2.2.1.3.2. Traductor específico</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#control-de-la-serializacion">2.2.1.4. Control de la serialización</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Por José Miguel Sánchez Alés
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright CC BY 4.0, 2024-2025, José Miguel Sánchez Alés.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>